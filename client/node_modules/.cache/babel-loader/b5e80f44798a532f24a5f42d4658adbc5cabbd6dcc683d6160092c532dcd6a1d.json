{"ast":null,"code":"import _regeneratorRuntime from\"/home/shadowjynxs/SIH1637/lpudrop/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/shadowjynxs/SIH1637/lpudrop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/shadowjynxs/SIH1637/lpudrop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Header from\"../../components/shared/Layout/Header\";import API from\"./../../services/API\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Analytics=function Analytics(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),inventoryData=_useState4[0],setInventoryData=_useState4[1];var colors=[\"#884A39\",\"#C38154\",\"#FFC26F\",\"#4F709C\",\"#4942E4\",\"#0079FF\",\"#FF0060\",\"#22A699\"];var getBloodGroupData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _ref2,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!props.isAdminPage){_context.next=7;break;}_context.next=4;return API.get(\"/analytics/bloodGroups-data\");case 4:_context.t0=_context.sent;_context.next=10;break;case 7:_context.next=9;return API.get(\"/analytics/adminBloodGroups-data\");case 9:_context.t0=_context.sent;case 10:_ref2=_context.t0;_data=_ref2.data;if(_data!==null&&_data!==void 0&&_data.success){setData(_data===null||_data===void 0?void 0:_data.bloodGroupData);}_context.next=18;break;case 15:_context.prev=15;_context.t1=_context[\"catch\"](0);console.log(_context.t1);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function getBloodGroupData(){return _ref.apply(this,arguments);};}();useEffect(function(){getBloodGroupData();},[]);var getBloodRecords=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(isAdmin){var _yield$API$get,_data2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return API.get(\"/inventory/get-recent-inventory?isAdmin=\".concat(isAdmin));case 3:_yield$API$get=_context2.sent;_data2=_yield$API$get.data;if(_data2!==null&&_data2!==void 0&&_data2.success){setInventoryData(_data2===null||_data2===void 0?void 0:_data2.inventory);console.log(_data2);}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function getBloodRecords(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){getBloodRecords(!props.isAdmin);},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[props.isAdminPage&&/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-row flex-wrap\",children:data===null||data===void 0?void 0:data.map(function(record,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-2 p-1\",style:{width:\"18rem\",backgroundColor:\"\".concat(colors[i])},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"card-title bg-light text-dark text-center mb-3\",children:record.bloodGroup}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Total In : \",/*#__PURE__*/_jsx(\"b\",{children:record.totalIn}),\" (ML)\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Total Out : \",/*#__PURE__*/_jsx(\"b\",{children:record.totalOut}),\" (ML)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer text-light bg-dark text-center\",children:[\"Total Available : \",/*#__PURE__*/_jsx(\"b\",{children:record.availabeBlood}),\" (ML)\"]})]},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-3\",children:\"Recent Blood Transactions\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Inventory Type\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Donar Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"TIme & Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:inventoryData===null||inventoryData===void 0?void 0:inventoryData.map(function(record){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.bloodGroup}),/*#__PURE__*/_jsx(\"td\",{children:record.inventoryType}),/*#__PURE__*/_jsxs(\"td\",{children:[record.quantity,\" (ML)\"]}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{children:moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")})]},record._id);})})]})]})]});};export default Analytics;","map":{"version":3,"names":["React","useState","useEffect","Header","API","moment","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Analytics","props","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","inventoryData","setInventoryData","colors","getBloodGroupData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","_data","wrap","_callee$","_context","prev","next","isAdminPage","get","t0","sent","success","bloodGroupData","t1","console","log","stop","apply","arguments","getBloodRecords","_ref3","_callee2","isAdmin","_yield$API$get","_data2","_callee2$","_context2","concat","inventory","_x","children","className","map","record","i","style","width","backgroundColor","bloodGroup","totalIn","totalOut","availabeBlood","scope","inventoryType","quantity","email","createdAt","format","_id"],"sources":["/home/shadowjynxs/SIH1637/lpudrop/client/src/pages/Dashboard/Analytics.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"../../components/shared/Layout/Header\";\nimport API from \"./../../services/API\";\nimport moment from \"moment\";\n\nconst Analytics = (props) => {\n  const [data, setData] = useState([]);\n  const [inventoryData, setInventoryData] = useState([]);\n  const colors = [\n    \"#884A39\",\n    \"#C38154\",\n    \"#FFC26F\",\n    \"#4F709C\",\n    \"#4942E4\",\n    \"#0079FF\",\n    \"#FF0060\",\n    \"#22A699\",\n  ];\n  const getBloodGroupData = async () => {\n    try {\n      const { data } = props.isAdminPage ? await API.get(\"/analytics/bloodGroups-data\") : await API.get(\"/analytics/adminBloodGroups-data\");\n      if (data?.success) {\n        setData(data?.bloodGroupData);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getBloodGroupData();\n  }, []);\n\n  const getBloodRecords = async (isAdmin) => {\n    try {\n      const { data } = await API.get(`/inventory/get-recent-inventory?isAdmin=${isAdmin}`);\n      if (data?.success) {\n        setInventoryData(data?.inventory);\n        console.log(data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  \n\n  useEffect(() => {\n    getBloodRecords(!props.isAdmin);\n  }, []);\n  return (\n    <>\n     {props.isAdminPage && <Header />}\n      <div className=\"d-flex flex-row flex-wrap\">\n        {data?.map((record, i) => (\n          <div\n            className=\"card m-2 p-1\"\n            key={i}\n            style={{ width: \"18rem\", backgroundColor: `${colors[i]}` }}\n          >\n            <div className=\"card-body\">\n              <h1 className=\"card-title bg-light text-dark text-center mb-3\">\n                {record.bloodGroup}\n              </h1>\n              <p className=\"card-text\">\n                Total In : <b>{record.totalIn}</b> (ML)\n              </p>\n              <p className=\"card-text\">\n                Total Out : <b>{record.totalOut}</b> (ML)\n              </p>\n            </div>\n            <div className=\"card-footer text-light bg-dark text-center\">\n              Total Available : <b>{record.availabeBlood}</b> (ML)\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className=\"container my-3\">\n        <h1 className=\"my-3\">Recent Blood Transactions</h1>\n        <table className=\"table \">\n          <thead>\n            <tr>\n              <th scope=\"col\">Blood Group</th>\n              <th scope=\"col\">Inventory Type</th>\n              <th scope=\"col\">Quantity</th>\n              <th scope=\"col\">Donar Email</th>\n              <th scope=\"col\">TIme & Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            {inventoryData?.map((record) => (\n              <tr key={record._id}>\n                <td>{record.bloodGroup}</td>\n                <td>{record.inventoryType}</td>\n                <td>{record.quantity} (ML)</td>\n                <td>{record.email}</td>\n                <td>{moment(record.createdAt).format(\"DD/MM/YYYY hh:mm A\")}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n};\n\nexport default Analytics;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}